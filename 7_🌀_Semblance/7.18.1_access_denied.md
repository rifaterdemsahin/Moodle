version: '3.8'

services:
  moodle:
    image: my-moodle:latest
    container_name: moodle_app
    restart: always
    ports:
      - "80:80"
    environment:
      MOODLE_DATABASE_TYPE: mysqli
      MOODLE_DATABASE_HOST: moodle_db
      MOODLE_DATABASE_PORT_NUMBER: 3306
      MOODLE_DATABASE_NAME: moodle
      MOODLE_DATABASE_USER: moodle
      MOODLE_DATABASE_PASSWORD: "SafeP@ssw0rd-123"
      MOODLE_USERNAME: admin
      MOODLE_PASSWORD: "SecureAdminP@ssw0rd456"
      MOODLE_EMAIL: contact@rifaterdemsahin.com
      MOODLE_SITE_NAME: "Moodle LMS"
      MOODLE_SKIP_BOOTSTRAP: "no"
      MOODLE_HOST: "rifaterdemsahin.com"
      MOODLE_INSTALL_TIMEOUT: 1800
      PHP_MAX_EXECUTION_TIME: 300
      PHP_MEMORY_LIMIT: 256M
      PHP_POST_MAX_SIZE: 50M
      PHP_UPLOAD_MAX_FILESIZE: 50M
      MOODLE_DATABASE_WAIT_TIMEOUT: 300
    volumes:
      - moodle_data:/bitnami/moodle
      - moodledata_data:/bitnami/moodledata
    depends_on:
      db:
        condition: service_healthy
    networks:
      - moodle-net

  db:
    image: mariadb:10.6
    container_name: moodle_db
    environment:
      MYSQL_DATABASE: moodle
      MYSQL_USER: moodle
      MYSQL_PASSWORD: "SafeP@ssw0rd-123"
      MYSQL_ROOT_PASSWORD: "RootP@ssw0rd789"
    volumes:
      - db_data:/var/lib/mysql
    healthcheck:
      test: ["CMD", "mysqladmin", "ping", "-h", "localhost", "-u$$MYSQL_USER", "-p$$MYSQL_PASSWORD"]
      interval: 10s
      timeout: 5s
      retries: 10
    networks:
      - moodle-net

volumes:
  moodle_data:
  moodledata_data:
  db_data:

networks:
  moodle-net:
    driver: bridge

---

++ echo apache
+ /opt/bitnami/scripts/apache/setup.sh
moodle 18:40:41.87 INFO  ==> Configuring Apache ServerTokens directive
+ /opt/bitnami/scripts/php/setup.sh
moodle 18:40:41.90 INFO  ==> Configuring PHP options
moodle 18:40:41.90 INFO  ==> Setting PHP expose_php option
moodle 18:40:41.91 INFO  ==> Setting PHP output_buffering option
+ /opt/bitnami/scripts/mysql-client/setup.sh
moodle 18:40:41.93 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
+ /opt/bitnami/scripts/postgresql-client/setup.sh
moodle 18:40:41.94 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
+ /opt/bitnami/scripts/moodle/setup.sh
moodle 18:40:42.02 INFO  ==> Ensuring Moodle directories exist
moodle 18:40:42.04 INFO  ==> Trying to connect to the database server
moodle 18:41:43.06 ERROR ==> Could not connect to the database
root@fd567e9f4cb9:/# exit
exit
@rifaterdemsahin âžœ /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker (main) $ docker-compose down -v
WARN[0000] /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion 
[+] Running 5/2
 âœ” Container moodle_app             Removed                                                               0.0s 
 âœ” Container moodle_db              Removed                                                               0.3s 
 âœ” Volume 2_docker_db_data          Removed                                                               0.0s 
 âœ” Volume 2_docker_moodle_data      Removed                                                               0.0s 
 âœ” Volume 2_docker_moodledata_data  Removed                                                               0.0s 
@rifaterdemsahin âžœ /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker (main) $ docker-compose up -d 
WARN[0000] /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion 
[+] Running 6/6
 âœ” Network 2_docker_moodle-net        Created                                                             0.1s 
 âœ” Volume "2_docker_moodledata_data"  Created                                                             0.0s 
 âœ” Volume "2_docker_db_data"          Created                                                             0.0s 
 âœ” Volume "2_docker_moodle_data"      Created                                                             0.0s 
 âœ” Container moodle_db                Healthy                                                            10.8s 
 âœ” Container moodle_app               Started                                                            11.0s 
@rifaterdemsahin âžœ /workspaces/Moodle/6_ðŸ”£_Symbo
@rifaterdemsahin âžœ /workspaces/Moodle/6_ðŸ”£_Symbo
@rifaterdemsahin âžœ /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker (main) $ d
ocker-compose down -v
WARN[0000] /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion 
[+] Running 6/2
 âœ” Container moodle_app             Removed       0.0s 
 âœ” Container moodle_db              Removed       0.5s 
 âœ” Volume 2_docker_moodledata_data  Removed       0.1s 
 âœ” Volume 2_docker_db_data          Removed       0.1s 
 âœ” Volume 2_docker_moodle_data      Removed       0.1s 
 âœ” Network 2_docker_moodle-net      Removed       0.1s 
@rifaterdemsahin âžœ /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker (main) $ docker-compose up --force-recreate
WARN[0000] /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion 
[+] Running 6/5
 âœ” Network 2_docker_moodle-net        Created     0.1s 
 âœ” Volume "2_docker_moodle_data"      Created     0.0s 
 âœ” Volume "2_docker_moodledata_data"  Created     0.0s 
 âœ” Volume "2_docker_db_data"          Created     0.0s 
 âœ” Container moodle_db                Created     0.0s 
 âœ” Container moodle_app               Created     0.1s 
Attaching to moodle_app, moodle_db
moodle_db   | 2025-03-15 18:49:26+00:00 [Note] [Entrypoint]: Entrypoint script for MariaDB Server 1:10.6.21+maria~ubu2004 started.
moodle_db   | 2025-03-15 18:49:26+00:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql'
moodle_db   | 2025-03-15 18:49:26+00:00 [Note] [Entrypoint]: Entrypoint script for MariaDB Server 1:10.6.21+maria~ubu2004 started.
moodle_db   | 2025-03-15 18:49:27+00:00 [Note] [Entrypoint]: Initializing database files
moodle_db   | 2025-03-15 18:49:28+00:00 [Note] [Entrypoint]: Database files initialized
moodle_db   | 2025-03-15 18:49:28+00:00 [Note] [Entrypoint]: Starting temporary server
moodle_db   | 2025-03-15 18:49:28+00:00 [Note] [Entrypoint]: Waiting for server startup
moodle_db   | 2025-03-15 18:49:28 0 [Note] Starting MariaDB 10.6.21-MariaDB-ubu2004 source revision 066e8d6aeabc13242193780341e0f845528105de server_uid LZ5pYRSfMNmPrIPsQAN9Z/SoloA= as process 95
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: Compressed tables use zlib 1.2.11
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: Number of pools: 1
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: Using crc32 + pclmulqdq instructions
moodle_db   | 2025-03-15 18:49:28 0 [Note] mariadbd: O_TMPFILE is not supported on /tmp (disabling future attempts)
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: Using Linux native AIO
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: Initializing buffer pool, total size = 134217728, chunk size = 134217728
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: Completed initialization of buffer pool
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: 128 rollback segments are active.
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: Creating shared tablespace for temporary tables
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: Setting file './ibtmp1' size to 12 MB. Physically writing the file full; Please wait ...
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: File './ibtmp1' size is now 12 MB.
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: 10.6.21 started; log sequence number 41354; transaction id 14
moodle_db   | 2025-03-15 18:49:28 0 [Note] Plugin 'FEEDBACK' is disabled.
moodle_db   | 2025-03-15 18:49:28 0 [Note] mariadbd: ready for connections.
moodle_db   | Version: '10.6.21-MariaDB-ubu2004'  socket: '/run/mysqld/mysqld.sock'  port: 0  mariadb.org binary distribution
moodle_db   | 2025-03-15 18:49:29+00:00 [Note] [Entrypoint]: Temporary server started.
moodle_db   | 2025-03-15 18:49:31+00:00 [Note] [Entrypoint]: Creating database moodle
moodle_db   | 2025-03-15 18:49:31+00:00 [Note] [Entrypoint]: Creating user moodle
moodle_db   | 2025-03-15 18:49:31+00:00 [Note] [Entrypoint]: Giving user moodle access to schema moodle
moodle_db   | 2025-03-15 18:49:31+00:00 [Note] [Entrypoint]: Securing system users (equivalent to running mysql_secure_installation)
moodle_db   | 
moodle_db   | 2025-03-15 18:49:31+00:00 [Note] [Entrypoint]: Stopping temporary server
moodle_db   | 2025-03-15 18:49:31 0 [Note] mariadbd (initiated by: unknown): Normal shutdown
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: FTS optimize thread exiting.
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Starting shutdown...
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Dumping buffer pool(s) to /var/lib/mysql/ib_buffer_pool
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Buffer pool(s) dump completed at 250315 18:49:31
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Removed temporary tablespace data file: "./ibtmp1"
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Shutdown completed; log sequence number 42664; transaction id 15
moodle_db   | 2025-03-15 18:49:31 0 [Note] mariadbd: Shutdown complete
moodle_db   | 2025-03-15 18:49:31+00:00 [Note] [Entrypoint]: Temporary server stopped
moodle_db   | 
moodle_db   | 2025-03-15 18:49:31+00:00 [Note] [Entrypoint]: MariaDB init process done. Ready for start up.
moodle_db   | 
moodle_db   | 2025-03-15 18:49:31 0 [Note] Starting MariaDB 10.6.21-MariaDB-ubu2004 source revision 066e8d6aeabc13242193780341e0f845528105de server_uid LZ5pYRSfMNmPrIPsQAN9Z/SoloA= as process 1
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Compressed tables use zlib 1.2.11
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Number of pools: 1
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Using crc32 + pclmulqdq instructions
moodle_db   | 2025-03-15 18:49:31 0 [Note] mariadbd: O_TMPFILE is not supported on /tmp (disabling future attempts)
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Using Linux native AIO
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Initializing buffer pool, total size = 134217728, chunk size = 134217728
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Completed initialization of buffer pool
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: 128 rollback segments are active.
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Creating shared tablespace for temporary tables
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Setting file './ibtmp1' size to 12 MB. Physically writing the file full; Please wait ...
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: File './ibtmp1' size is now 12 MB.
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: 10.6.21 started; log sequence number 42664; transaction id 15
moodle_db   | 2025-03-15 18:49:31 0 [Note] Plugin 'FEEDBACK' is disabled.
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Loading buffer pool(s) from /var/lib/mysql/ib_buffer_pool
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Buffer pool(s) load completed at 250315 18:49:31
moodle_db   | 2025-03-15 18:49:31 0 [Warning] You need to use --log-bin to make --expire-logs-days or --binlog-expire-logs-seconds work.
moodle_db   | 2025-03-15 18:49:31 0 [Note] Server socket created on IP: '0.0.0.0'.
moodle_db   | 2025-03-15 18:49:31 0 [Note] Server socket created on IP: '::'.
moodle_db   | 2025-03-15 18:49:31 0 [Note] mariadbd: ready for connections.
moodle_db   | Version: '10.6.21-MariaDB-ubu2004'  socket: '/run/mysqld/mysqld.sock'  port: 3306  mariadb.org binary distribution
moodle_db   | 2025-03-15 18:49:36 3 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:49:37.49 INFO  ==> 
moodle_app  | moodle 18:49:37.49 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:49:37.49 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:49:37.49 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:49:37.49 INFO  ==> 
moodle_app  | moodle 18:49:37.50 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:49:37.54 INFO  ==> Generating sample certificates
moodle_app  | Certificate request self-signature ok
moodle_app  | subject=CN = example.com
moodle_app  | moodle 18:49:38.78 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:49:38.81 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:49:38.82 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:49:38.83 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:49:38.83 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:49:38.84 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:49:38.85 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:49:38.86 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:49:38.88 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:49:38.89 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:49:38.96 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:49:38.99 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:49:39.09 INFO  ==> Running Moodle install script
moodle_app exited with code 0
moodle_app  | moodle 18:49:40.81 INFO  ==> 
moodle_app  | moodle 18:49:40.81 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:49:40.82 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:49:40.82 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:49:40.82 INFO  ==> 
moodle_app  | moodle 18:49:40.82 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:49:40.86 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:49:40.89 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:49:40.89 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:49:40.90 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:49:40.91 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:49:40.92 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:49:40.93 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:49:40.94 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:49:40.96 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:49:40.97 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:49:41.04 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:49:41.07 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:49:41.18 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_app  | moodle 18:49:42.31 INFO  ==> 
moodle_app  | moodle 18:49:42.31 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:49:42.31 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:49:42.31 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:49:42.32 INFO  ==> 
moodle_app  | moodle 18:49:42.32 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:49:42.37 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:49:42.43 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:49:42.44 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:49:42.46 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:49:42.49 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:49:42.51 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:49:42.53 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:49:42.56 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:49:42.62 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:49:42.63 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:49:42.84 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:49:42.90 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:49:43.14 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_app  | moodle 18:49:44.12 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:49:44.13 INFO  ==> 
moodle_app  | moodle 18:49:44.13 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:49:44.21 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:49:44.27 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:49:44.28 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:49:44.31 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:49:44.33 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:49:44.35 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:49:44.37 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:49:44.40 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:49:44.44 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:49:44.47 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:49:44.67 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:49:44.72 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:49:44.93 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_app  | moodle 18:49:46.56 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:49:46.62 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:49:46.63 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:49:46.65 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:49:46.69 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:49:46.72 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:49:46.74 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:49:46.75 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:49:46.79 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:49:46.80 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:49:46.97 INFO  ==> Ensuring Moodle directories exist
moodle_db   | 2025-03-15 18:49:46 13 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:49:47.02 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:49:47.20 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_app  | moodle 18:49:49.17 INFO  ==> 
moodle_app  | moodle 18:49:49.17 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:49:49.17 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:49:49.18 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:49:49.18 INFO  ==> 
moodle_app  | moodle 18:49:49.18 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:49:49.21 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:49:49.24 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:49:49.24 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:49:49.25 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:49:49.26 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:49:49.27 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:49:49.28 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:49:49.29 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:49:49.31 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:49:49.31 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:49:49.39 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:49:49.41 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:49:49.51 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_app  | moodle 18:49:53.04 INFO  ==> 
moodle_app  | moodle 18:49:53.04 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:49:53.04 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:49:53.04 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:49:53.04 INFO  ==> 
moodle_app  | moodle 18:49:53.05 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:49:53.08 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:49:53.10 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:49:53.11 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:49:53.12 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:49:53.13 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:49:53.14 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:49:53.15 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:49:53.16 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:49:53.17 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:49:53.18 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:49:53.25 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:49:53.28 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:49:53.38 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:49:57 20 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:50:00.16 INFO  ==> 
moodle_app  | moodle 18:50:00.16 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:50:00.17 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:50:00.17 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:50:00.17 INFO  ==> 
moodle_app  | moodle 18:50:00.17 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:50:00.21 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:50:00.23 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:50:00.24 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:50:00.25 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:50:00.26 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:50:00.26 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:50:00.27 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:50:00.28 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:50:00.30 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:50:00.31 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:50:00.38 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:50:00.41 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:50:00.52 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:50:07 23 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:50:13.73 INFO  ==> 
moodle_app  | moodle 18:50:13.73 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:50:13.73 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:50:13.74 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:50:13.74 INFO  ==> 
moodle_app  | moodle 18:50:13.74 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:50:13.79 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:50:13.82 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:50:13.83 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:50:13.84 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:50:13.85 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:50:13.86 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:50:13.87 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:50:13.88 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:50:13.90 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:50:13.91 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:50:13.98 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:50:14.00 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:50:14.10 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:50:17 26 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:50:27 27 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:50:37 28 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:50:40.05 INFO  ==> 
moodle_app  | moodle 18:50:40.05 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:50:40.05 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:50:40.06 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:50:40.06 INFO  ==> 
moodle_app  | moodle 18:50:40.06 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:50:40.10 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:50:40.15 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:50:40.17 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:50:40.19 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:50:40.21 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:50:40.22 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:50:40.23 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:50:40.25 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:50:40.28 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:50:40.28 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:50:40.38 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:50:40.42 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:50:40.53 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:50:47 31 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:50:57 32 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:51:07 33 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:51:17 34 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:51:27 35 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:51:32.08 INFO  ==> 
moodle_app  | moodle 18:51:32.09 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:51:32.09 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:51:32.09 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:51:32.09 INFO  ==> 
moodle_app  | moodle 18:51:32.10 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:51:32.13 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:51:32.15 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:51:32.16 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:51:32.17 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:51:32.18 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:51:32.19 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:51:32.20 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:51:32.21 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:51:32.23 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:51:32.24 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:51:32.33 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:51:32.37 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:51:32.46 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:51:37 38 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:51:47 39 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:51:57 40 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:52:07 41 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:52:17 42 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:52:27 43 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:52:32.85 INFO  ==> 
moodle_app  | moodle 18:52:32.85 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:52:32.85 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:52:32.85 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:52:32.86 INFO  ==> 
moodle_app  | moodle 18:52:32.86 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:52:32.89 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:52:32.92 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:52:32.92 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:52:32.93 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:52:32.94 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:52:32.95 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:52:32.96 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:52:32.97 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:52:32.99 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:52:33.00 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:52:33.07 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:52:33.09 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:52:33.19 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:52:38 46 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:52:48 47 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:52:58 48 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:53:08 49 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:53:18 50 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:53:28 51 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:53:33.56 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:53:33.56 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:53:33.56 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:53:33.57 INFO  ==> 
moodle_app  | moodle 18:53:33.57 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:53:33.60 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:53:33.63 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:53:33.63 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:53:33.64 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:53:33.65 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:53:33.67 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:53:33.68 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:53:33.69 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:53:33.71 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:53:33.71 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:53:33.79 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:53:33.81 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:53:33.93 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:53:38 54 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:53:48 55 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:53:58 56 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:54:08 57 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:54:18 58 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:54:28 59 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:54:34.27 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodl

---

It seems like you're encountering an issue with your Docker Compose setup for Moodle, where the moodle_app container is repeatedly exiting with an error code (either 0 or 1) after failing to connect to the database properly. The logs also show repeated "Access denied" warnings from the MariaDB container (moodle_db), indicating a potential misconfiguration in the database connection settings. Letâ€™s troubleshoot and resolve this step-by-step.
Problem Analysis
Database Connection Failure:
The moodle_app container logs show itâ€™s trying to connect to the database server but exits after running the Moodle install script.
The moodle_db logs show repeated warnings: Access denied for user '$MYSQL_USER'@'localhost' (using password: YES). This suggests that the Moodle application is attempting to connect with incorrect credentials or that the environment variables are not being interpreted correctly.
Environment Variable Issues:
In the logs, the username appears as $MYSQL_USER (a literal string) rather than the expected moodle. This indicates that the environment variable substitution might not be working as intended in the Moodle container when it tries to connect to the database.
Container Restart Behavior:
The moodle_app container is set to restart: always, so it keeps restarting after failing, which explains the repetitive logs.
Healthcheck Success:
The moodle_db container is marked as "Healthy" by Docker Compose, and its initialization logs show that the moodle database and user are created successfully. This suggests the database itself is running fine, but the Moodle app cannot authenticate.
Likely Cause
The issue appears to stem from how the Moodle container is interpreting the database credentials. Specifically:
The MOODLE_DATABASE_USER and MOODLE_DATABASE_PASSWORD environment variables in the moodle service are set correctly in the docker-compose.yml file (moodle and SafeP@ssw0rd-123), but the Moodle setup script might not be picking them up properly.
The Bitnami Moodle container uses additional environment variables like MYSQL_CLIENT_* or internal logic that might conflict with or override the MOODLE_DATABASE_* variables.
The repeated "Access denied" error with $MYSQL_USER suggests that the Moodle container is not substituting the environment variable MYSQL_USER correctly and is passing the literal string $MYSQL_USER instead of moodle.
Steps to Fix the Issue
1. Verify Environment Variable Consistency
Ensure that the Moodle container is using the correct credentials by explicitly aligning the database client variables with the ones defined for the db service. Bitnami containers often use MYSQL_CLIENT_* variables for database connections, so letâ€™s add these to the moodle service.
Update the moodle service in your docker-compose.yml like this:
yaml
  moodle:
    image: my-moodle:latest
    container_name: moodle_app
    restart: always
    ports:
      - "80:80"
    environment:
      MOODLE_DATABASE_TYPE: mysqli
      MOODLE_DATABASE_HOST: moodle_db
      MOODLE_DATABASE_PORT_NUMBER: 3306
      MOODLE_DATABASE_NAME: moodle
      MOODLE_DATABASE_USER: moodle
      MOODLE_DATABASE_PASSWORD: "SafeP@ssw0rd-123"
      MYSQL_CLIENT_DATABASE_HOST: moodle_db  # Add this
      MYSQL_CLIENT_DATABASE_USER: moodle     # Add this
      MYSQL_CLIENT_DATABASE_PASSWORD: "SafeP@ssw0rd-123"  # Add this
      MYSQL_CLIENT_DATABASE_NAME: moodle     # Add this
      MOODLE_USERNAME: admin
      MOODLE_PASSWORD: "SecureAdminP@ssw0rd456"
      MOODLE_EMAIL: contact@rifaterdemsahin.com
      MOODLE_SITE_NAME: "Moodle LMS"
      MOODLE_SKIP_BOOTSTRAP: "no"
      MOODLE_HOST: "rifaterdemsahin.com"
      MOODLE_INSTALL_TIMEOUT: 1800
      PHP_MAX_EXECUTION_TIME: 300
      PHP_MEMORY_LIMIT: 256M
      PHP_POST_MAX_SIZE: 50M
      PHP_UPLOAD_MAX_FILESIZE: 50M
      MOODLE_DATABASE_WAIT_TIMEOUT: 300
    volumes:
      - moodle_data:/bitnami/moodle
      - moodledata_data:/bitnami/moodledata
    depends_on:
      db:
        condition: service_healthy
    networks:
      - moodle-net
2. Check Network Connectivity
The MOODLE_DATABASE_HOST is set to moodle_db, which matches the container name of the database service and should resolve correctly within the moodle-net network. This looks fine, but ensure there are no network-related issues:
Confirm that both containers are on the same network (moodle-net) by running:
bash
docker network inspect 2_docker_moodle-net
If thereâ€™s an issue, recreate the network by bringing down and up the containers:
bash
docker-compose down -v
docker-compose up -d --force-recreate
3. Inspect Logs for More Details
The current logs donâ€™t show the exact error from the Moodle install script. To get more detailed output:
Stop the containers:
bash
docker-compose down -v
Start them in the foreground (without -d) to see real-time logs:
bash
docker-compose up --force-recreate
Look for any specific error messages after Running Moodle install script.
4. Test Database Access Manually
Verify that the database is accessible from the moodle_app container:
Start the containers:
bash
docker-compose up -d
Access the moodle_app container:
bash
docker exec -it moodle_app bash
Test the MySQL connection:
bash
mysql -h moodle_db -u moodle -p"SafeP@ssw0rd-123" -D moodle
If this fails with "Access denied," thereâ€™s a mismatch in credentials or the database user wasnâ€™t created correctly. If it succeeds, the issue is within the Moodle setup script.
5. Reset and Rebuild
If the above steps donâ€™t resolve the issue, reset everything and rebuild:
Stop and remove containers, volumes, and networks:
bash
docker-compose down -v
Rebuild and start:
bash
docker-compose up -d --build
6. Check Bitnami Documentation
Since youâ€™re using a Bitnami-based image (my-moodle:latest), consult the official Bitnami Moodle Docker documentation for any specific environment variables or quirks:
Bitnami Moodle Docker GitHub
Ensure your my-moodle:latest image is based on the latest Bitnami Moodle image and hasnâ€™t introduced custom changes that break compatibility.
Updated docker-compose.yml
Hereâ€™s the full updated file with the suggested changes:
yaml
services:
  moodle:
    image: my-moodle:latest
    container_name: moodle_app
    restart: always
    ports:
      - "80:80"
    environment:
      MOODLE_DATABASE_TYPE: mysqli
      MOODLE_DATABASE_HOST: moodle_db
      MOODLE_DATABASE_PORT_NUMBER: 3306
      MOODLE_DATABASE_NAME: moodle
      MOODLE_DATABASE_USER: moodle
      MOODLE_DATABASE_PASSWORD: "SafeP@ssw0rd-123"
      MYSQL_CLIENT_DATABASE_HOST: moodle_db
      MYSQL_CLIENT_DATABASE_USER: moodle
      MYSQL_CLIENT_DATABASE_PASSWORD: "SafeP@ssw0rd-123"
      MYSQL_CLIENT_DATABASE_NAME: moodle
      MOODLE_USERNAME: admin
      MOODLE_PASSWORD: "SecureAdminP@ssw0rd456"
      MOODLE_EMAIL: contact@rifaterdemsahin.com
      MOODLE_SITE_NAME: "Moodle LMS"
      MOODLE_SKIP_BOOTSTRAP: "no"
      MOODLE_HOST: "rifaterdemsahin.com"
      MOODLE_INSTALL_TIMEOUT: 1800
      PHP_MAX_EXECUTION_TIME: 300
      PHP_MEMORY_LIMIT: 256M
      PHP_POST_MAX_SIZE: 50M
      PHP_UPLOAD_MAX_FILESIZE: 50M
      MOODLE_DATABASE_WAIT_TIMEOUT: 300
    volumes:
      - moodle_data:/bitnami/moodle
      - moodledata_data:/bitnami/moodledata
    depends_on:
      db:
        condition: service_healthy
    networks:
      - moodle-net

  db:
    image: mariadb:10.6
    container_name: moodle_db
    environment:
      MYSQL_DATABASE: moodle
      MYSQL_USER: moodle
      MYSQL_PASSWORD: "SafeP@ssw0rd-123"
      MYSQL_ROOT_PASSWORD: "RootP@ssw0rd789"
    volumes:
      - db_data:/var/lib/mysql
    healthcheck:
      test: ["CMD", "mysqladmin", "ping", "-h", "localhost", "-u$$MYSQL_USER", "-p$$MYSQL_PASSWORD"]
      interval: 10s
      timeout: 5s
      retries: 10
    networks:
      - moodle-net

volumes:
  moodle_data:
  moodledata_data:
  db_data:

networks:
  moodle-net:
    driver: bridge
(Note: I removed the version: '3.8' line since itâ€™s obsolete and generates a warning.)
Next Steps
Apply the updated docker-compose.yml.
Run docker-compose down -v && docker-compose up -d --force-recreate.
Monitor the logs with docker-compose logs -f.
If the issue persists, share the detailed logs from the moodle_app container after it attempts the install script.
Let me know how it goes or if you need further assistance!

---

@rifaterdemsahin âžœ /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker (main) $ docker-compose down -v
WARN[0000] /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion 
[+] Running 5/2
 âœ” Container moodle_app             Removed                                                               0.0s 
 âœ” Container moodle_db              Removed                                                               0.3s 
 âœ” Volume 2_docker_db_data          Removed                                                               0.0s 
 âœ” Volume 2_docker_moodle_data      Removed                                                               0.0s 
 âœ” Volume 2_docker_moodledata_data  Removed                                                               0.0s 
@rifaterdemsahin âžœ /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker (main) $ docker-compose up -d 
WARN[0000] /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion 
[+] Running 6/6
 âœ” Network 2_docker_moodle-net        Created                                                             0.1s 
 âœ” Volume "2_docker_moodledata_data"  Created                                                             0.0s 
 âœ” Volume "2_docker_db_data"          Created                                                             0.0s 
 âœ” Volume "2_docker_moodle_data"      Created                                                             0.0s 
 âœ” Container moodle_db                Healthy                                                            10.8s 
 âœ” Container moodle_app               Started                                                            11.0s 
@rifaterdemsahin âžœ /workspaces/Moodle/6_ðŸ”£_Symbo
@rifaterdemsahin âžœ /workspaces/Moodle/6_ðŸ”£_Symbo
@rifaterdemsahin âžœ /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker (main) $ d
ocker-compose down -v
WARN[0000] /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion 
[+] Running 6/2
 âœ” Container moodle_app             Removed       0.0s 
 âœ” Container moodle_db              Removed       0.5s 
 âœ” Volume 2_docker_moodledata_data  Removed       0.1s 
 âœ” Volume 2_docker_db_data          Removed       0.1s 
 âœ” Volume 2_docker_moodle_data      Removed       0.1s 
 âœ” Network 2_docker_moodle-net      Removed       0.1s 
@rifaterdemsahin âžœ /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker (main) $ docker-compose up --force-recreate
WARN[0000] /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion 
[+] Running 6/5
 âœ” Network 2_docker_moodle-net        Created     0.1s 
 âœ” Volume "2_docker_moodle_data"      Created     0.0s 
 âœ” Volume "2_docker_moodledata_data"  Created     0.0s 
 âœ” Volume "2_docker_db_data"          Created     0.0s 
 âœ” Container moodle_db                Created     0.0s 
 âœ” Container moodle_app               Created     0.1s 
Attaching to moodle_app, moodle_db
moodle_db   | 2025-03-15 18:49:26+00:00 [Note] [Entrypoint]: Entrypoint script for MariaDB Server 1:10.6.21+maria~ubu2004 started.
moodle_db   | 2025-03-15 18:49:26+00:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql'
moodle_db   | 2025-03-15 18:49:26+00:00 [Note] [Entrypoint]: Entrypoint script for MariaDB Server 1:10.6.21+maria~ubu2004 started.
moodle_db   | 2025-03-15 18:49:27+00:00 [Note] [Entrypoint]: Initializing database files
moodle_db   | 2025-03-15 18:49:28+00:00 [Note] [Entrypoint]: Database files initialized
moodle_db   | 2025-03-15 18:49:28+00:00 [Note] [Entrypoint]: Starting temporary server
moodle_db   | 2025-03-15 18:49:28+00:00 [Note] [Entrypoint]: Waiting for server startup
moodle_db   | 2025-03-15 18:49:28 0 [Note] Starting MariaDB 10.6.21-MariaDB-ubu2004 source revision 066e8d6aeabc13242193780341e0f845528105de server_uid LZ5pYRSfMNmPrIPsQAN9Z/SoloA= as process 95
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: Compressed tables use zlib 1.2.11
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: Number of pools: 1
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: Using crc32 + pclmulqdq instructions
moodle_db   | 2025-03-15 18:49:28 0 [Note] mariadbd: O_TMPFILE is not supported on /tmp (disabling future attempts)
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: Using Linux native AIO
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: Initializing buffer pool, total size = 134217728, chunk size = 134217728
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: Completed initialization of buffer pool
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: 128 rollback segments are active.
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: Creating shared tablespace for temporary tables
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: Setting file './ibtmp1' size to 12 MB. Physically writing the file full; Please wait ...
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: File './ibtmp1' size is now 12 MB.
moodle_db   | 2025-03-15 18:49:28 0 [Note] InnoDB: 10.6.21 started; log sequence number 41354; transaction id 14
moodle_db   | 2025-03-15 18:49:28 0 [Note] Plugin 'FEEDBACK' is disabled.
moodle_db   | 2025-03-15 18:49:28 0 [Note] mariadbd: ready for connections.
moodle_db   | Version: '10.6.21-MariaDB-ubu2004'  socket: '/run/mysqld/mysqld.sock'  port: 0  mariadb.org binary distribution
moodle_db   | 2025-03-15 18:49:29+00:00 [Note] [Entrypoint]: Temporary server started.
moodle_db   | 2025-03-15 18:49:31+00:00 [Note] [Entrypoint]: Creating database moodle
moodle_db   | 2025-03-15 18:49:31+00:00 [Note] [Entrypoint]: Creating user moodle
moodle_db   | 2025-03-15 18:49:31+00:00 [Note] [Entrypoint]: Giving user moodle access to schema moodle
moodle_db   | 2025-03-15 18:49:31+00:00 [Note] [Entrypoint]: Securing system users (equivalent to running mysql_secure_installation)
moodle_db   | 
moodle_db   | 2025-03-15 18:49:31+00:00 [Note] [Entrypoint]: Stopping temporary server
moodle_db   | 2025-03-15 18:49:31 0 [Note] mariadbd (initiated by: unknown): Normal shutdown
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: FTS optimize thread exiting.
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Starting shutdown...
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Dumping buffer pool(s) to /var/lib/mysql/ib_buffer_pool
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Buffer pool(s) dump completed at 250315 18:49:31
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Removed temporary tablespace data file: "./ibtmp1"
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Shutdown completed; log sequence number 42664; transaction id 15
moodle_db   | 2025-03-15 18:49:31 0 [Note] mariadbd: Shutdown complete
moodle_db   | 2025-03-15 18:49:31+00:00 [Note] [Entrypoint]: Temporary server stopped
moodle_db   | 
moodle_db   | 2025-03-15 18:49:31+00:00 [Note] [Entrypoint]: MariaDB init process done. Ready for start up.
moodle_db   | 
moodle_db   | 2025-03-15 18:49:31 0 [Note] Starting MariaDB 10.6.21-MariaDB-ubu2004 source revision 066e8d6aeabc13242193780341e0f845528105de server_uid LZ5pYRSfMNmPrIPsQAN9Z/SoloA= as process 1
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Compressed tables use zlib 1.2.11
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Number of pools: 1
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Using crc32 + pclmulqdq instructions
moodle_db   | 2025-03-15 18:49:31 0 [Note] mariadbd: O_TMPFILE is not supported on /tmp (disabling future attempts)
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Using Linux native AIO
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Initializing buffer pool, total size = 134217728, chunk size = 134217728
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Completed initialization of buffer pool
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: 128 rollback segments are active.
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Creating shared tablespace for temporary tables
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Setting file './ibtmp1' size to 12 MB. Physically writing the file full; Please wait ...
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: File './ibtmp1' size is now 12 MB.
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: 10.6.21 started; log sequence number 42664; transaction id 15
moodle_db   | 2025-03-15 18:49:31 0 [Note] Plugin 'FEEDBACK' is disabled.
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Loading buffer pool(s) from /var/lib/mysql/ib_buffer_pool
moodle_db   | 2025-03-15 18:49:31 0 [Note] InnoDB: Buffer pool(s) load completed at 250315 18:49:31
moodle_db   | 2025-03-15 18:49:31 0 [Warning] You need to use --log-bin to make --expire-logs-days or --binlog-expire-logs-seconds work.
moodle_db   | 2025-03-15 18:49:31 0 [Note] Server socket created on IP: '0.0.0.0'.
moodle_db   | 2025-03-15 18:49:31 0 [Note] Server socket created on IP: '::'.
moodle_db   | 2025-03-15 18:49:31 0 [Note] mariadbd: ready for connections.
moodle_db   | Version: '10.6.21-MariaDB-ubu2004'  socket: '/run/mysqld/mysqld.sock'  port: 3306  mariadb.org binary distribution
moodle_db   | 2025-03-15 18:49:36 3 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:49:37.49 INFO  ==> 
moodle_app  | moodle 18:49:37.49 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:49:37.49 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:49:37.49 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:49:37.49 INFO  ==> 
moodle_app  | moodle 18:49:37.50 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:49:37.54 INFO  ==> Generating sample certificates
moodle_app  | Certificate request self-signature ok
moodle_app  | subject=CN = example.com
moodle_app  | moodle 18:49:38.78 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:49:38.81 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:49:38.82 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:49:38.83 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:49:38.83 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:49:38.84 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:49:38.85 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:49:38.86 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:49:38.88 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:49:38.89 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:49:38.96 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:49:38.99 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:49:39.09 INFO  ==> Running Moodle install script
moodle_app exited with code 0
moodle_app  | moodle 18:49:40.81 INFO  ==> 
moodle_app  | moodle 18:49:40.81 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:49:40.82 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:49:40.82 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:49:40.82 INFO  ==> 
moodle_app  | moodle 18:49:40.82 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:49:40.86 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:49:40.89 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:49:40.89 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:49:40.90 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:49:40.91 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:49:40.92 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:49:40.93 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:49:40.94 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:49:40.96 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:49:40.97 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:49:41.04 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:49:41.07 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:49:41.18 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_app  | moodle 18:49:42.31 INFO  ==> 
moodle_app  | moodle 18:49:42.31 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:49:42.31 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:49:42.31 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:49:42.32 INFO  ==> 
moodle_app  | moodle 18:49:42.32 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:49:42.37 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:49:42.43 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:49:42.44 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:49:42.46 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:49:42.49 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:49:42.51 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:49:42.53 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:49:42.56 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:49:42.62 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:49:42.63 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:49:42.84 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:49:42.90 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:49:43.14 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_app  | moodle 18:49:44.12 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:49:44.13 INFO  ==> 
moodle_app  | moodle 18:49:44.13 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:49:44.21 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:49:44.27 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:49:44.28 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:49:44.31 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:49:44.33 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:49:44.35 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:49:44.37 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:49:44.40 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:49:44.44 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:49:44.47 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:49:44.67 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:49:44.72 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:49:44.93 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_app  | moodle 18:49:46.56 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:49:46.62 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:49:46.63 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:49:46.65 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:49:46.69 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:49:46.72 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:49:46.74 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:49:46.75 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:49:46.79 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:49:46.80 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:49:46.97 INFO  ==> Ensuring Moodle directories exist
moodle_db   | 2025-03-15 18:49:46 13 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:49:47.02 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:49:47.20 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_app  | moodle 18:49:49.17 INFO  ==> 
moodle_app  | moodle 18:49:49.17 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:49:49.17 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:49:49.18 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:49:49.18 INFO  ==> 
moodle_app  | moodle 18:49:49.18 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:49:49.21 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:49:49.24 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:49:49.24 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:49:49.25 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:49:49.26 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:49:49.27 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:49:49.28 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:49:49.29 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:49:49.31 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:49:49.31 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:49:49.39 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:49:49.41 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:49:49.51 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_app  | moodle 18:49:53.04 INFO  ==> 
moodle_app  | moodle 18:49:53.04 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:49:53.04 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:49:53.04 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:49:53.04 INFO  ==> 
moodle_app  | moodle 18:49:53.05 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:49:53.08 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:49:53.10 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:49:53.11 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:49:53.12 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:49:53.13 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:49:53.14 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:49:53.15 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:49:53.16 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:49:53.17 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:49:53.18 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:49:53.25 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:49:53.28 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:49:53.38 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:49:57 20 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:50:00.16 INFO  ==> 
moodle_app  | moodle 18:50:00.16 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:50:00.17 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:50:00.17 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:50:00.17 INFO  ==> 
moodle_app  | moodle 18:50:00.17 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:50:00.21 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:50:00.23 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:50:00.24 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:50:00.25 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:50:00.26 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:50:00.26 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:50:00.27 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:50:00.28 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:50:00.30 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:50:00.31 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:50:00.38 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:50:00.41 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:50:00.52 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:50:07 23 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:50:13.73 INFO  ==> 
moodle_app  | moodle 18:50:13.73 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:50:13.73 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:50:13.74 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:50:13.74 INFO  ==> 
moodle_app  | moodle 18:50:13.74 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:50:13.79 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:50:13.82 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:50:13.83 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:50:13.84 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:50:13.85 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:50:13.86 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:50:13.87 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:50:13.88 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:50:13.90 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:50:13.91 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:50:13.98 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:50:14.00 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:50:14.10 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:50:17 26 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:50:27 27 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:50:37 28 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:50:40.05 INFO  ==> 
moodle_app  | moodle 18:50:40.05 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:50:40.05 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:50:40.06 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:50:40.06 INFO  ==> 
moodle_app  | moodle 18:50:40.06 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:50:40.10 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:50:40.15 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:50:40.17 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:50:40.19 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:50:40.21 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:50:40.22 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:50:40.23 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:50:40.25 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:50:40.28 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:50:40.28 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:50:40.38 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:50:40.42 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:50:40.53 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:50:47 31 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:50:57 32 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:51:07 33 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:51:17 34 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:51:27 35 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:51:32.08 INFO  ==> 
moodle_app  | moodle 18:51:32.09 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:51:32.09 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:51:32.09 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:51:32.09 INFO  ==> 
moodle_app  | moodle 18:51:32.10 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:51:32.13 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:51:32.15 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:51:32.16 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:51:32.17 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:51:32.18 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:51:32.19 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:51:32.20 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:51:32.21 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:51:32.23 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:51:32.24 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:51:32.33 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:51:32.37 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:51:32.46 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:51:37 38 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:51:47 39 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:51:57 40 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:52:07 41 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:52:17 42 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:52:27 43 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:52:32.85 INFO  ==> 
moodle_app  | moodle 18:52:32.85 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:52:32.85 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:52:32.85 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:52:32.86 INFO  ==> 
moodle_app  | moodle 18:52:32.86 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:52:32.89 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:52:32.92 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:52:32.92 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:52:32.93 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:52:32.94 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:52:32.95 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:52:32.96 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:52:32.97 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:52:32.99 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:52:33.00 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:52:33.07 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:52:33.09 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:52:33.19 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:52:38 46 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:52:48 47 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:52:58 48 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:53:08 49 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:53:18 50 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:53:28 51 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:53:33.56 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:53:33.56 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:53:33.56 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:53:33.57 INFO  ==> 
moodle_app  | moodle 18:53:33.57 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:53:33.60 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:53:33.63 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:53:33.63 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:53:33.64 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:53:33.65 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:53:33.67 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:53:33.68 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:53:33.69 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:53:33.71 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:53:33.71 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:53:33.79 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:53:33.81 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:53:33.93 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:53:38 54 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:53:48 55 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:53:58 56 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:54:08 57 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:54:18 58 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:54:28 59 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:54:34.27 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:54:34.28 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:54:34.28 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:54:34.28 INFO  ==> 
moodle_app  | moodle 18:54:34.28 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:54:34.32 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:54:34.35 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:54:34.36 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:54:34.37 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:54:34.39 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:54:34.40 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:54:34.42 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:54:34.43 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:54:34.48 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:54:34.49 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:54:34.59 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:54:34.63 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:54:34.74 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:54:38 62 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:54:48 63 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:54:58 64 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:55:08 65 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:55:18 66 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:55:28 67 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:55:35.11 INFO  ==> 
moodle_app  | moodle 18:55:35.11 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:55:35.11 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:55:35.11 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:55:35.12 INFO  ==> 
moodle_app  | moodle 18:55:35.12 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:55:35.15 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:55:35.18 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:55:35.19 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:55:35.20 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:55:35.21 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:55:35.22 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:55:35.24 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:55:35.25 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:55:35.28 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:55:35.29 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:55:35.40 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:55:35.42 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:55:35.53 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:55:39 70 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:55:49 71 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:55:59 72 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:56:09 73 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_db   | 2025-03-15 18:56:19 74 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
Gracefully stopping... (press Ctrl+C again to force)
[+] Stopping 2/2
 âœ” Container moodle_app  Stopped                                                                          0.0s 
 âœ” Container moodle_db   Stopped                                                                          0.4s 
@rifaterdemsahin âžœ /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker (main) $ ^C
@rifaterdemsahin âžœ /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker (main) $ docker-compose down -v
[+] Running 6/0
 âœ” Container moodle_app             Removed                                                               0.0s 
 âœ” Container moodle_db              Removed                                                               0.0s 
 âœ” Volume 2_docker_db_data          Removed                                                               0.0s 
 âœ” Volume 2_docker_moodle_data      Removed                                                               0.0s 
 âœ” Volume 2_docker_moodledata_data  Removed                                                               0.0s 
 âœ” Network 2_docker_moodle-net      Removed                                                               0.0s 
@rifaterdemsahin âžœ /workspaces/Moodle/6_ðŸ”£_Symbols/2_docker (main) $ docker-compose up --force-recreate
[+] Running 6/5
 âœ” Network 2_docker_moodle-net        Created                                                             0.1s 
 âœ” Volume "2_docker_db_data"          Created                                                             0.0s 
 âœ” Volume "2_docker_moodle_data"      Created                                                             0.0s 
 âœ” Volume "2_docker_moodledata_data"  Created                                                             0.0s 
 âœ” Container moodle_db                Created                                                             0.0s 
 âœ” Container moodle_app               Created                                                             0.0s 
Attaching to moodle_app, moodle_db
moodle_db   | 2025-03-15 18:56:30+00:00 [Note] [Entrypoint]: Entrypoint script for MariaDB Server 1:10.6.21+maria~ubu2004 started.
moodle_db   | 2025-03-15 18:56:31+00:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql'
moodle_db   | 2025-03-15 18:56:31+00:00 [Note] [Entrypoint]: Entrypoint script for MariaDB Server 1:10.6.21+maria~ubu2004 started.
moodle_db   | 2025-03-15 18:56:31+00:00 [Note] [Entrypoint]: Initializing database files
moodle_db   | 2025-03-15 18:56:32+00:00 [Note] [Entrypoint]: Database files initialized
moodle_db   | 2025-03-15 18:56:32+00:00 [Note] [Entrypoint]: Starting temporary server
moodle_db   | 2025-03-15 18:56:32+00:00 [Note] [Entrypoint]: Waiting for server startup
moodle_db   | 2025-03-15 18:56:32 0 [Note] Starting MariaDB 10.6.21-MariaDB-ubu2004 source revision 066e8d6aeabc13242193780341e0f845528105de server_uid LZ5pYRSfMNmPrIPsQAN9Z/SoloA= as process 95
moodle_db   | 2025-03-15 18:56:32 0 [Note] InnoDB: Compressed tables use zlib 1.2.11
moodle_db   | 2025-03-15 18:56:32 0 [Note] InnoDB: Number of pools: 1
moodle_db   | 2025-03-15 18:56:32 0 [Note] InnoDB: Using crc32 + pclmulqdq instructions
moodle_db   | 2025-03-15 18:56:32 0 [Note] mariadbd: O_TMPFILE is not supported on /tmp (disabling future attempts)
moodle_db   | 2025-03-15 18:56:32 0 [Note] InnoDB: Using Linux native AIO
moodle_db   | 2025-03-15 18:56:32 0 [Note] InnoDB: Initializing buffer pool, total size = 134217728, chunk size = 134217728
moodle_db   | 2025-03-15 18:56:32 0 [Note] InnoDB: Completed initialization of buffer pool
moodle_db   | 2025-03-15 18:56:32 0 [Note] InnoDB: 128 rollback segments are active.
moodle_db   | 2025-03-15 18:56:32 0 [Note] InnoDB: Creating shared tablespace for temporary tables
moodle_db   | 2025-03-15 18:56:32 0 [Note] InnoDB: Setting file './ibtmp1' size to 12 MB. Physically writing the file full; Please wait ...
moodle_db   | 2025-03-15 18:56:32 0 [Note] InnoDB: File './ibtmp1' size is now 12 MB.
moodle_db   | 2025-03-15 18:56:32 0 [Note] InnoDB: 10.6.21 started; log sequence number 41354; transaction id 14
moodle_db   | 2025-03-15 18:56:32 0 [Note] Plugin 'FEEDBACK' is disabled.
moodle_db   | 2025-03-15 18:56:32 0 [Note] mariadbd: ready for connections.
moodle_db   | Version: '10.6.21-MariaDB-ubu2004'  socket: '/run/mysqld/mysqld.sock'  port: 0  mariadb.org binary distribution
moodle_db   | 2025-03-15 18:56:33+00:00 [Note] [Entrypoint]: Temporary server started.
moodle_db   | 2025-03-15 18:56:35+00:00 [Note] [Entrypoint]: Creating database moodle
moodle_db   | 2025-03-15 18:56:35+00:00 [Note] [Entrypoint]: Creating user moodle
moodle_db   | 2025-03-15 18:56:35+00:00 [Note] [Entrypoint]: Giving user moodle access to schema moodle
moodle_db   | 2025-03-15 18:56:35+00:00 [Note] [Entrypoint]: Securing system users (equivalent to running mysql_secure_installation)
moodle_db   | 
moodle_db   | 2025-03-15 18:56:35+00:00 [Note] [Entrypoint]: Stopping temporary server
moodle_db   | 2025-03-15 18:56:35 0 [Note] mariadbd (initiated by: unknown): Normal shutdown
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: FTS optimize thread exiting.
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: Starting shutdown...
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: Dumping buffer pool(s) to /var/lib/mysql/ib_buffer_pool
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: Buffer pool(s) dump completed at 250315 18:56:35
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: Removed temporary tablespace data file: "./ibtmp1"
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: Shutdown completed; log sequence number 42664; transaction id 15
moodle_db   | 2025-03-15 18:56:35 0 [Note] mariadbd: Shutdown complete
moodle_db   | 2025-03-15 18:56:35+00:00 [Note] [Entrypoint]: Temporary server stopped
moodle_db   | 
moodle_db   | 2025-03-15 18:56:35+00:00 [Note] [Entrypoint]: MariaDB init process done. Ready for start up.
moodle_db   | 
moodle_db   | 2025-03-15 18:56:35 0 [Note] Starting MariaDB 10.6.21-MariaDB-ubu2004 source revision 066e8d6aeabc13242193780341e0f845528105de server_uid LZ5pYRSfMNmPrIPsQAN9Z/SoloA= as process 1
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: Compressed tables use zlib 1.2.11
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: Number of pools: 1
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: Using crc32 + pclmulqdq instructions
moodle_db   | 2025-03-15 18:56:35 0 [Note] mariadbd: O_TMPFILE is not supported on /tmp (disabling future attempts)
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: Using Linux native AIO
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: Initializing buffer pool, total size = 134217728, chunk size = 134217728
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: Completed initialization of buffer pool
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: 128 rollback segments are active.
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: Creating shared tablespace for temporary tables
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: Setting file './ibtmp1' size to 12 MB. Physically writing the file full; Please wait ...
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: File './ibtmp1' size is now 12 MB.
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: 10.6.21 started; log sequence number 42664; transaction id 15
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: Loading buffer pool(s) from /var/lib/mysql/ib_buffer_pool
moodle_db   | 2025-03-15 18:56:35 0 [Note] Plugin 'FEEDBACK' is disabled.
moodle_db   | 2025-03-15 18:56:35 0 [Note] InnoDB: Buffer pool(s) load completed at 250315 18:56:35
moodle_db   | 2025-03-15 18:56:35 0 [Warning] You need to use --log-bin to make --expire-logs-days or --binlog-expire-logs-seconds work.
moodle_db   | 2025-03-15 18:56:35 0 [Note] Server socket created on IP: '0.0.0.0'.
moodle_db   | 2025-03-15 18:56:35 0 [Note] Server socket created on IP: '::'.
moodle_db   | 2025-03-15 18:56:35 0 [Note] mariadbd: ready for connections.
moodle_db   | Version: '10.6.21-MariaDB-ubu2004'  socket: '/run/mysqld/mysqld.sock'  port: 3306  mariadb.org binary distribution
moodle_db   | 2025-03-15 18:56:40 3 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:56:41.72 INFO  ==> 
moodle_app  | moodle 18:56:41.72 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:56:41.72 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:56:41.73 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:56:41.73 INFO  ==> 
moodle_app  | moodle 18:56:41.73 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:56:41.77 INFO  ==> Generating sample certificates
moodle_app  | Certificate request self-signature ok
moodle_app  | subject=CN = example.com
moodle_app  | moodle 18:56:43.68 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:56:43.70 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:56:43.71 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:56:43.72 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:56:43.73 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:56:43.74 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:56:43.75 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:56:43.76 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:56:43.78 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:56:43.79 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:56:43.86 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:56:43.88 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:56:43.99 INFO  ==> Running Moodle install script
moodle_app exited with code 0
moodle_app  | moodle 18:56:45.06 INFO  ==> 
moodle_app  | moodle 18:56:45.06 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:56:45.06 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:56:45.07 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:56:45.07 INFO  ==> 
moodle_app  | moodle 18:56:45.07 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:56:45.10 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:56:45.13 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:56:45.13 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:56:45.14 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:56:45.15 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:56:45.16 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:56:45.17 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:56:45.18 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:56:45.20 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:56:45.21 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:56:45.29 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:56:45.32 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:56:45.44 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_app  | moodle 18:56:46.65 INFO  ==> 
moodle_app  | moodle 18:56:46.65 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:56:46.66 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:56:46.66 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:56:46.66 INFO  ==> 
moodle_app  | moodle 18:56:46.66 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:56:46.69 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:56:46.72 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:56:46.72 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:56:46.73 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:56:46.74 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:56:46.75 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:56:46.76 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:56:46.77 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:56:46.79 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:56:46.79 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:56:46.87 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:56:46.90 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:56:46.99 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_app  | moodle 18:56:47.70 INFO  ==> 
moodle_app  | moodle 18:56:47.70 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:56:47.71 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:56:47.71 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:56:47.71 INFO  ==> 
moodle_app  | moodle 18:56:47.71 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:56:47.74 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:56:47.78 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:56:47.78 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:56:47.81 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:56:47.82 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:56:47.84 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:56:47.85 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:56:47.86 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:56:47.88 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:56:47.88 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:56:47.96 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:56:47.99 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:56:48.09 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_app  | moodle 18:56:49.33 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:56:49.37 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:56:49.38 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:56:49.39 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:56:49.40 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:56:49.42 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:56:49.43 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:56:49.44 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:56:49.46 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:56:49.47 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:56:49.54 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:56:49.57 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:56:49.67 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:56:51 15 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:56:51.61 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:56:51.61 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:56:51.61 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:56:51.62 INFO  ==> 
moodle_app  | moodle 18:56:51.62 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:56:51.65 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:56:51.68 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:56:51.68 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:56:51.69 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:56:51.70 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:56:51.71 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:56:51.72 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:56:51.73 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:56:51.75 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:56:51.76 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:56:51.89 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:56:51.92 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:56:52.06 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_app  | moodle 18:56:55.59 INFO  ==> 
moodle_app  | moodle 18:56:55.59 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:56:55.60 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:56:55.60 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:56:55.60 INFO  ==> 
moodle_app  | moodle 18:56:55.60 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:56:55.64 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:56:55.67 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:56:55.68 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:56:55.69 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:56:55.70 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:56:55.70 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:56:55.71 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:56:55.72 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:56:55.74 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:56:55.75 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:56:55.82 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:56:55.85 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:56:55.95 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:57:01 20 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)
moodle_app  | moodle 18:57:02.68 INFO  ==> 
moodle_app  | moodle 18:57:02.68 INFO  ==> Welcome to the Bitnami moodle container
moodle_app  | moodle 18:57:02.68 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
moodle_app  | moodle 18:57:02.68 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.
moodle_app  | moodle 18:57:02.68 INFO  ==> 
moodle_app  | moodle 18:57:02.68 INFO  ==> ** Starting Moodle setup **
moodle_app  | moodle 18:57:02.72 INFO  ==> Configuring Apache ServerTokens directive
moodle_app  | moodle 18:57:02.74 INFO  ==> Configuring PHP options
moodle_app  | moodle 18:57:02.75 INFO  ==> Setting PHP expose_php option
moodle_app  | moodle 18:57:02.76 INFO  ==> Setting PHP max_execution_time option
moodle_app  | moodle 18:57:02.76 INFO  ==> Setting PHP memory_limit option
moodle_app  | moodle 18:57:02.77 INFO  ==> Setting PHP post_max_size option
moodle_app  | moodle 18:57:02.78 INFO  ==> Setting PHP upload_max_filesize option
moodle_app  | moodle 18:57:02.79 INFO  ==> Setting PHP output_buffering option
moodle_app  | moodle 18:57:02.81 INFO  ==> Validating settings in MYSQL_CLIENT_* env vars
moodle_app  | moodle 18:57:02.81 INFO  ==> Validating settings in POSTGRESQL_CLIENT_* env vars
moodle_app  | moodle 18:57:02.90 INFO  ==> Ensuring Moodle directories exist
moodle_app  | moodle 18:57:02.92 INFO  ==> Trying to connect to the database server
moodle_app  | moodle 18:57:03.01 INFO  ==> Running Moodle install script
moodle_app exited with code 1
moodle_db   | 2025-03-15 18:57:11 23 [Warning] Access denied for user '$MYSQL_USER'@'localhost' (using password: YES)

---


deep seek 

It looks like you're encountering an issue where the Moodle container is unable to connect to the MariaDB database due to an "Access denied" error. This typically indicates a problem with the database credentials or permissions. Let's go through some steps to troubleshoot and resolve this issue.

### 1. Verify Database Credentials
Ensure that the database credentials specified in your `docker-compose.yml` file are correct. Specifically, check the following environment variables:

```yaml
environment:
  MOODLE_DATABASE_TYPE: mysqli
  MOODLE_DATABASE_HOST: moodle_db
  MOODLE_DATABASE_PORT_NUMBER: 3306
  MOODLE_DATABASE_NAME: moodle
  MOODLE_DATABASE_USER: moodle
  MOODLE_DATABASE_PASSWORD: "SafeP@ssw0rd-123"
  MYSQL_CLIENT_DATABASE_HOST: moodle_db
  MYSQL_CLIENT_DATABASE_USER: moodle
  MYSQL_CLIENT_DATABASE_PASSWORD: "SafeP@ssw0rd-123"
  MYSQL_CLIENT_DATABASE_NAME: moodle
```

Make sure that the `MOODLE_DATABASE_USER` and `MOODLE_DATABASE_PASSWORD` match the credentials used in the MariaDB container:

```yaml
environment:
  MYSQL_DATABASE: moodle
  MYSQL_USER: moodle
  MYSQL_PASSWORD: "SafeP@ssw0rd-123"
  MYSQL_ROOT_PASSWORD: "RootP@ssw0rd789"
```

### 2. Check Database User Permissions
Ensure that the `moodle` user has the necessary permissions to access the `moodle` database. You can do this by connecting to the MariaDB container and running the following commands:

```bash
docker exec -it moodle_db mysql -u root -p
```

Enter the root password (`RootP@ssw0rd789` in this case) and then run:

```sql
GRANT ALL PRIVILEGES ON moodle.* TO 'moodle'@'%';
FLUSH PRIVILEGES;
```

### 3. Verify Network Configuration
Ensure that both containers are on the same Docker network (`moodle-net`). This is specified in your `docker-compose.yml` file, but it's worth double-checking that the network is correctly set up.

### 4. Check Database Logs
Look at the logs from the MariaDB container to see if there are any additional error messages that might provide more context:

```bash
docker logs moodle_db
```

### 5. Recreate the Containers
Sometimes, recreating the containers can resolve issues related to stale volumes or network configurations. Run the following commands to remove and recreate the containers:

```bash
docker-compose down -v
docker-compose up -d --build
```

### 6. Debugging Moodle Container
If the above steps don't resolve the issue, you can try running the Moodle container in interactive mode to debug further:

```bash
docker-compose run --service-ports moodle bash
```

Once inside the container, you can manually try to connect to the database using the `mysql` client:

```bash
mysql -h moodle_db -u moodle -p
```

Enter the password (`SafeP@ssw0rd-123`) and see if you can connect. If you can't, the issue is likely with the database credentials or permissions.

### 7. Check for Environment Variable Substitution
Ensure that the environment variables are being correctly substituted. Sometimes, issues can arise if the variables are not being passed correctly. You can verify this by checking the environment variables inside the Moodle container:

```bash
docker exec -it moodle_app env
```

### 8. Review Bitnami Documentation
Since you're using a Bitnami-based image, it's worth reviewing the official Bitnami Moodle Docker documentation for any specific environment variables or quirks:

[Bitnami Moodle Docker GitHub](https://github.com/bitnami/containers/tree/main/bitnami/moodle)

### Summary
- Verify database credentials.
- Check database user permissions.
- Ensure both containers are on the same network.
- Check database logs for additional errors.
- Recreate the containers.
- Debug the Moodle container interactively.
- Verify environment variable substitution.
- Review Bitnami documentation.

If you follow these steps and still encounter issues, please provide any additional logs or error messages for further assistance.

---

Hereâ€™s a rewritten and cleaned-up version of your `docker-compose.yml` file. I've ensured proper formatting, removed redundant environment variables, and added comments for clarity:

```yaml
version: '3.8'  # Specify the Docker Compose version

services:
  moodle:
    image: my-moodle:latest  # Custom Moodle image
    container_name: moodle_app  # Name of the Moodle container
    restart: always  # Ensure the container restarts on failure
    ports:
      - "80:80"  # Expose port 80 for web access
    environment:
      # Moodle database configuration
      MOODLE_DATABASE_TYPE: mysqli
      MOODLE_DATABASE_HOST: moodle_db  # Database host (service name)
      MOODLE_DATABASE_PORT_NUMBER: 3306  # Database port
      MOODLE_DATABASE_NAME: moodle  # Database name
      MOODLE_DATABASE_USER: moodle  # Database user
      MOODLE_DATABASE_PASSWORD: "SafeP@ssw0rd-123"  # Database password

      # Moodle admin user configuration
      MOODLE_USERNAME: admin  # Admin username
      MOODLE_PASSWORD: "SecureAdminP@ssw0rd456"  # Admin password
      MOODLE_EMAIL: contact@rifaterdemsahin.com  # Admin email
      MOODLE_SITE_NAME: "Moodle LMS"  # Site name
      MOODLE_HOST: "rifaterdemsahin.com"  # Site host

      # PHP and Moodle performance settings
      PHP_MAX_EXECUTION_TIME: 300  # Max PHP execution time
      PHP_MEMORY_LIMIT: 256M  # PHP memory limit
      PHP_POST_MAX_SIZE: 50M  # Max POST data size
      PHP_UPLOAD_MAX_FILESIZE: 50M  # Max file upload size
      MOODLE_DATABASE_WAIT_TIMEOUT: 300  # Database connection timeout

      # Skip Moodle bootstrap (set to "no" for fresh installs)
      MOODLE_SKIP_BOOTSTRAP: "no"
    volumes:
      - moodle_data:/bitnami/moodle  # Moodle application data
      - moodledata_data:/bitnami/moodledata  # Moodle user data
    depends_on:
      db:
        condition: service_healthy  # Wait for the database to be healthy
    networks:
      - moodle-net  # Connect to the moodle-net network

  db:
    image: mariadb:10.6  # MariaDB image
    container_name: moodle_db  # Name of the database container
    environment:
      MYSQL_DATABASE: moodle  # Database name
      MYSQL_USER: moodle  # Database user
      MYSQL_PASSWORD: "SafeP@ssw0rd-123"  # Database user password
      MYSQL_ROOT_PASSWORD: "RootP@ssw0rd789"  # Database root password
    volumes:
      - db_data:/var/lib/mysql  # Persistent storage for database files
    healthcheck:
      test: ["CMD", "mysqladmin", "ping", "-h", "localhost", "-u$$MYSQL_USER", "-p$$MYSQL_PASSWORD"]  # Health check command
      interval: 10s  # Check every 10 seconds
      timeout: 5s  # Timeout after 5 seconds
      retries: 10  # Retry up to 10 times
    networks:
      - moodle-net  # Connect to the moodle-net network

volumes:
  moodle_data:  # Volume for Moodle application data
  moodledata_data:  # Volume for Moodle user data
  db_data:  # Volume for MariaDB data

networks:
  moodle-net:  # Define a custom bridge network
    driver: bridge
```

### Key Changes and Improvements:
1. **Removed Redundant Variables**: Removed `MYSQL_CLIENT_*` environment variables as they are not necessary for Moodle to connect to the database.
2. **Added Comments**: Added comments to explain each section and environment variable for better readability and understanding.
3. **Health Check**: The `depends_on` condition ensures the Moodle container waits for the database to be healthy before starting.
4. **Persistent Volumes**: Defined volumes for Moodle and MariaDB to ensure data persistence across container restarts.
5. **Network Configuration**: Both services are connected to the same custom bridge network (`moodle-net`) for seamless communication.

This configuration should work seamlessly for setting up Moodle with MariaDB in Docker. Let me know if you need further assistance!

---

The logs indicate that the Moodle container is repeatedly failing to connect to the MariaDB database due to an **"Access denied for user '$MYSQL_USER'@'localhost'"** error. This suggests that the database credentials or permissions are not correctly configured. Let's troubleshoot and resolve this step by step.

---

### **Steps to Resolve the Issue**

#### 1. **Verify Database Credentials**
Ensure that the database credentials in the `docker-compose.yml` file match exactly between the Moodle and MariaDB services. Specifically, check the following:

- **Moodle Service:**
  ```yaml
  environment:
    MOODLE_DATABASE_USER: moodle
    MOODLE_DATABASE_PASSWORD: "SafeP@ssw0rd-123"
  ```

- **MariaDB Service:**
  ```yaml
  environment:
    MYSQL_USER: moodle
    MYSQL_PASSWORD: "SafeP@ssw0rd-123"
  ```

Make sure there are no typos or mismatches in the username or password.

---

#### 2. **Check Database User Permissions**
The `moodle` user must have the necessary permissions to access the `moodle` database. To verify this:

1. Connect to the MariaDB container:
   ```bash
   docker exec -it moodle_db mysql -u root -p
   ```
   Enter the root password (`RootP@ssw0rd789`).

2. Grant the necessary permissions to the `moodle` user:
   ```sql
   GRANT ALL PRIVILEGES ON moodle.* TO 'moodle'@'%';
   FLUSH PRIVILEGES;
   ```

3. Verify the permissions:
   ```sql
   SHOW GRANTS FOR 'moodle'@'%';
   ```

   The output should show that the `moodle` user has full access to the `moodle` database.

---

#### 3. **Check Environment Variable Substitution**
The error message shows `$MYSQL_USER` instead of the actual username (`moodle`). This suggests that the environment variables are not being correctly substituted. To fix this:

1. Ensure that the `docker-compose.yml` file does not have any syntax errors.
2. Verify that the environment variables are correctly set in the Moodle container:
   ```bash
   docker exec -it moodle_app env
   ```
   Look for the `MOODLE_DATABASE_USER` and `MOODLE_DATABASE_PASSWORD` variables. They should match the values in the `docker-compose.yml` file.

---

#### 4. **Check Database Connectivity**
Manually test the database connection from the Moodle container to ensure the database is reachable:

1. Connect to the Moodle container:
   ```bash
   docker exec -it moodle_app bash
   ```

2. Install the MySQL client (if not already installed):
   ```bash
   apt-get update && apt-get install -y mysql-client
   ```

3. Test the database connection:
   ```bash
   mysql -h moodle_db -u moodle -p
   ```
   Enter the password (`SafeP@ssw0rd-123`). If the connection fails, the issue is with the database credentials or network configuration.

---

#### 5. **Check Network Configuration**
Ensure that both the Moodle and MariaDB containers are on the same Docker network (`moodle-net`). Verify this by running:
```bash
docker network inspect moodle-net
```
Both `moodle_app` and `moodle_db` should be listed under the `Containers` section.

---

#### 6. **Recreate the Containers**
If the above steps don't resolve the issue, try recreating the containers to ensure a clean start:

1. Stop and remove the containers and volumes:
   ```bash
   docker-compose down -v
   ```

2. Rebuild and start the containers:
   ```bash
   docker-compose up -d --build
   ```

---

#### 7. **Check MariaDB Logs**
Inspect the MariaDB logs for additional error messages:
```bash
docker logs moodle_db
```
Look for any warnings or errors related to user authentication or permissions.

---

#### 8. **Update the `docker-compose.yml` File**
If the issue persists, update the `docker-compose.yml` file to explicitly set the database host and user:

```yaml
environment:
  MOODLE_DATABASE_HOST: moodle_db
  MOODLE_DATABASE_USER: moodle
  MOODLE_DATABASE_PASSWORD: "SafeP@ssw0rd-123"
```

---

### **Summary of Fixes**
1. Verify database credentials in `docker-compose.yml`.
2. Grant proper permissions to the `moodle` user in MariaDB.
3. Check environment variable substitution.
4. Test database connectivity from the Moodle container.
5. Ensure both containers are on the same network.
6. Recreate the containers.
7. Check MariaDB logs for additional errors.

If you follow these steps and the issue persists, please provide additional logs or error messages for further troubleshooting.

